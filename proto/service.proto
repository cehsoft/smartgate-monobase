syntax = "proto3";
package main;
option go_package="./;mygrpc";


message ResStatus {
    int32 statusCode = 1;
    string errCode = 2;
    string errMessage = 3;
}

message ResEmpty {
    ResStatus status = 1;
}

message ReqEmpty {
}

message ReqMLResult {
    string ContainerID = 1;
    string ImageURL = 2;
    float Score = 3;
}

message ResMLResult {
    ResStatus status = 1;

    int32 CachedID = 5;
    string ContainerID = 2;
    string ImageURL = 3;
    float Score = 4;
}

message ReqConfirmContainerID {
    optional int32 CachedID = 1;
    string ContainerID = 2;
}

service MyGRPC {
    rpc newMLResult(ReqMLResult) returns (ResEmpty);
    rpc pullMLResult(ReqEmpty) returns (stream ResMLResult);
    rpc confirmContainerID(ReqConfirmContainerID) returns (ResEmpty);
}